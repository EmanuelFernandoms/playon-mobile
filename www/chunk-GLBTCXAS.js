import{a as te,b as ne}from"./chunk-XFDSVCZC.js";import{b as G,c as H,d as L,e as Q,g as A,h as J,i as Y,j as K,m as W,n as X,o as Z,v as ee}from"./chunk-IFRWFENO.js";import"./chunk-OJUVZHLW.js";import"./chunk-QUJFQN2Y.js";import"./chunk-FEEG2QC5.js";import"./chunk-SHK2YYVN.js";import"./chunk-23JPK34T.js";import"./chunk-P5KSPTUK.js";import"./chunk-CXLC43CY.js";import"./chunk-RCM5NIA6.js";import"./chunk-7FY2OE2O.js";import"./chunk-DEX3QH37.js";import"./chunk-T27P4ZLZ.js";import"./chunk-VARVFX7A.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-5DNE6CQN.js";import"./chunk-CKP3SGE2.js";import"./chunk-AKIS33NR.js";import"./chunk-XIXWUKZM.js";import{$ as _,$a as q,C as m,F as p,G as n,H as t,I as d,O as y,P as x,Q as f,Xa as N,Y as E,Ya as R,Z as r,Za as U,_ as C,_a as B,aa as M,cb as $,db as D,eb as V,fb as j,ga as S,ha as I,ja as w,la as k,m as O,n as h,na as F,pa as T,sa as z,u as s,w as v,y as b,zb as P}from"./chunk-GXCPHFE6.js";import"./chunk-IULK653U.js";import"./chunk-IGVXFY24.js";import"./chunk-5TIAO6TV.js";import"./chunk-BANGDX2W.js";import"./chunk-FZQDFHAZ.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-XTVTS2NW.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function oe(a,c){if(a&1&&(n(0,"ion-select-option",26),r(1),t()),a&2){let i=c.$implicit;p("value",i.id),s(),_(" ",i.nome," ")}}function re(a,c){if(a&1&&(n(0,"ion-select-option",26),r(1),t()),a&2){let i=c.$implicit;p("value",i.id),s(),_(" ",i.nome||"Quadra "+i.numero," ")}}function ie(a,c){a&1&&(n(0,"div",27),d(1,"ion-spinner"),n(2,"p"),r(3,"Buscando reservas..."),t()())}function ae(a,c){a&1&&(n(0,"div",32),d(1,"ion-icon",33),n(2,"p"),r(3,"Nenhuma reserva encontrada com os filtros selecionados."),t(),n(4,"p"),r(5,"Tente ajustar os filtros de busca."),t()())}function se(a,c){if(a&1&&(n(0,"div",42),d(1,"ion-icon",50),n(2,"span"),r(3),t()()),a&2){let i=f().$implicit;s(3),C(i.observacoes)}}function ce(a,c){if(a&1){let i=y();n(0,"div",36),x("click",function(){let o=O(i).$implicit,l=f(3);return h(l.abrirReserva(o))}),n(1,"div",37)(2,"div",38),d(3,"ion-icon",39),n(4,"span"),r(5),t()(),n(6,"div",40),r(7),t()(),n(8,"div",41)(9,"div",42),d(10,"ion-icon",43),n(11,"span"),r(12),t()(),n(13,"div",42),d(14,"ion-icon",44),n(15,"span"),r(16),t()(),m(17,se,4,1,"div",45),t(),n(18,"div",46)(19,"div",47)(20,"span",48),r(21,"Valor:"),t(),n(22,"span",49),r(23),t()()()()}if(a&2){let i=c.$implicit,e=f(3);s(5),C(i.nome_esporte),s(),E("status-confirmada",i.status==="confirmada")("status-pendente",i.status==="pendente")("status-cancelada",i.status==="cancelada"),s(),_(" ",i.status," "),s(5),C(e.formatarData(i.data)),s(4),M("",e.formatarHorario(i.hora_inicio)," - ",e.formatarHorario(i.hora_fim)),s(),p("ngIf",i.observacoes),s(6),_("R$ ",i.valor)}}function le(a,c){if(a&1&&(n(0,"div",34),m(1,ce,24,13,"div",35),t()),a&2){let i=f(2);s(),p("ngForOf",i.reservas)}}function de(a,c){if(a&1&&(n(0,"div",28)(1,"div",29)(2,"h2"),r(3),t()(),m(4,ae,6,0,"div",30)(5,le,2,1,"div",31),t()),a&2){let i=f();s(3),M("",i.reservas.length," ",i.reservas.length===1?"reserva encontrada":"reservas encontradas"),s(),p("ngIf",i.reservas.length===0),s(),p("ngIf",i.reservas.length>0)}}var be=(()=>{let c=class c{constructor(e,o,l){this.http=e,this.router=o,this.fb=l,this.reservas=[],this.carregando=!1,this.esportesUnicos=[],this.quadrasUnicas=[],this.ginasios=[],this.filtrosForm=this.fb.group({search:[""],data:[""],status:[""],id_esporte:[""],id_quadra:[""],cidade:[""],uf:[""]})}ngOnInit(){this.carregarGinasios(),this.buscarReservas()}carregarGinasios(){this.http.post(`${P.apiBaseUrl}/load-gym-all`,{}).subscribe({next:e=>{this.ginasios=e,this.carregarQuadras()},error:e=>{console.error("Erro ao carregar gin\xE1sios:",e)}})}carregarQuadras(){let e=this.ginasios.map(o=>this.http.get(`${P.apiBaseUrl}/getCourtByGym?id=${o.id}`).toPromise());Promise.all(e).then(o=>{let l=[];o.forEach(g=>{g&&l.push(...g)}),this.quadrasUnicas=l}).catch(o=>{console.error("Erro ao carregar quadras:",o)})}buscarReservas(){this.carregando=!0;let e=this.filtrosForm.value,o=new URLSearchParams;e.search&&e.search.trim()&&o.append("search",e.search.trim()),e.data&&o.append("data",e.data),e.status&&o.append("status",e.status),e.id_esporte&&o.append("id_esporte",e.id_esporte.toString()),e.id_quadra&&o.append("id_quadra",e.id_quadra.toString()),e.cidade&&e.cidade.trim()&&o.append("cidade",e.cidade.trim()),e.uf&&e.uf.trim()&&o.append("uf",e.uf.trim());let l=new k({"Content-Type":"application/x-www-form-urlencoded"}),g=o.toString()||"";this.http.post(`${P.apiBaseUrl}/getBookingAll`,g,{headers:l}).subscribe({next:u=>{this.reservas=u||[],(this.esportesUnicos.length===0||u.length>0)&&this.extrairEsportesUnicos(),this.carregando=!1,console.log("Reservas encontradas:",u)},error:u=>{console.error("Erro ao buscar reservas:",u),this.reservas=[],this.carregando=!1}})}extrairEsportesUnicos(){let e=new Map;this.reservas.forEach(o=>{o.id_esporte&&o.nome_esporte&&(e.has(o.id_esporte)||e.set(o.id_esporte,{id:o.id_esporte,nome:o.nome_esporte}))}),this.esportesUnicos=Array.from(e.values())}limparFiltros(){this.filtrosForm.reset(),this.buscarReservas()}abrirReserva(e){this.router.navigate(["/reserva",e.id])}formatarHorario(e){return e?e.substring(0,5):""}formatarData(e){return e?new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}):""}};c.\u0275fac=function(o){return new(o||c)(v(F),v(z),v(D))},c.\u0275cmp=b({type:c,selectors:[["app-explorar"]],decls:62,vars:6,consts:[[1,"ion-padding",3,"fullscreen"],[1,"explorar-header"],[1,"filtros-section"],[3,"ngSubmit","formGroup"],[1,"filtros-grid"],[1,"filtro-item"],["position","stacked"],["formControlName","search","placeholder","Esporte, c\xF3digo ou observa\xE7\xF5es"],["type","date","formControlName","data"],["formControlName","status","placeholder","Todos"],["value",""],["value","confirmada"],["value","pendente"],["value","cancelada"],["formControlName","id_esporte","placeholder","Todos"],[3,"value",4,"ngFor","ngForOf"],["formControlName","id_quadra","placeholder","Todas"],["formControlName","cidade","placeholder","Nome da cidade"],["formControlName","uf","placeholder","Ex: SC, SP, RJ","maxlength","2",2,"text-transform","uppercase"],[1,"filtros-actions"],["expand","block","type","submit",1,"buscar-button"],["name","search-outline","slot","start"],["fill","outline","expand","block","type","button",1,"limpar-button",3,"click"],["name","close-outline","slot","start"],["class","loading-container",4,"ngIf"],["class","resultados-section",4,"ngIf"],[3,"value"],[1,"loading-container"],[1,"resultados-section"],[1,"resultados-header"],["class","empty-state",4,"ngIf"],["class","reservas-grid",4,"ngIf"],[1,"empty-state"],["name","search-outline"],[1,"reservas-grid"],["class","reserva-card",3,"click",4,"ngFor","ngForOf"],[1,"reserva-card",3,"click"],[1,"reserva-header"],[1,"reserva-esporte"],["name","football-outline"],[1,"reserva-status"],[1,"reserva-body"],[1,"reserva-info-item"],["name","calendar-outline"],["name","time-outline"],["class","reserva-info-item",4,"ngIf"],[1,"reserva-footer"],[1,"reserva-valor"],[1,"valor-label"],[1,"valor-amount"],["name","document-text-outline"]],template:function(o,l){o&1&&(d(0,"app-navbar"),n(1,"ion-content",0)(2,"div",1)(3,"h1"),r(4,"Explorar Reservas"),t(),n(5,"p"),r(6,"Encontre reservas e atividades dispon\xEDveis"),t()(),n(7,"div",2)(8,"form",3),x("ngSubmit",function(){return l.buscarReservas()}),n(9,"div",4)(10,"ion-item",5)(11,"ion-label",6),r(12,"Buscar"),t(),d(13,"ion-input",7),t(),n(14,"ion-item",5)(15,"ion-label",6),r(16,"Data"),t(),d(17,"ion-input",8),t(),n(18,"ion-item",5)(19,"ion-label",6),r(20,"Status"),t(),n(21,"ion-select",9)(22,"ion-select-option",10),r(23,"Todos"),t(),n(24,"ion-select-option",11),r(25,"Confirmada"),t(),n(26,"ion-select-option",12),r(27,"Pendente"),t(),n(28,"ion-select-option",13),r(29,"Cancelada"),t()()(),n(30,"ion-item",5)(31,"ion-label",6),r(32,"Esporte"),t(),n(33,"ion-select",14)(34,"ion-select-option",10),r(35,"Todos"),t(),m(36,oe,2,2,"ion-select-option",15),t()(),n(37,"ion-item",5)(38,"ion-label",6),r(39,"Quadra"),t(),n(40,"ion-select",16)(41,"ion-select-option",10),r(42,"Todas"),t(),m(43,re,2,2,"ion-select-option",15),t()(),n(44,"ion-item",5)(45,"ion-label",6),r(46,"Cidade"),t(),d(47,"ion-input",17),t(),n(48,"ion-item",5)(49,"ion-label",6),r(50,"Estado (UF)"),t(),d(51,"ion-input",18),t()(),n(52,"div",19)(53,"ion-button",20),d(54,"ion-icon",21),r(55," Buscar "),t(),n(56,"ion-button",22),x("click",function(){return l.limparFiltros()}),d(57,"ion-icon",23),r(58," Limpar "),t()()()(),m(59,ie,4,0,"div",24)(60,de,6,4,"div",25),t(),d(61,"app-footer")),o&2&&(s(),p("fullscreen",!0),s(7),p("formGroup",l.filtrosForm),s(28),p("ngForOf",l.esportesUnicos),s(7),p("ngForOf",l.quadrasUnicas),s(16),p("ngIf",l.carregando),s(),p("ngIf",!l.carregando))},dependencies:[w,S,I,V,U,N,R,$,j,B,q,ee,L,Q,A,J,Y,K,W,X,Z,G,H,T,te,ne],styles:[".ion-padding[_ngcontent-%COMP%]{--background: var(--background-color, #ffffff) !important;background-color:var(--background-color, #ffffff)!important;padding-bottom:80px!important}ion-content[_ngcontent-%COMP%]{--background: var(--background-color, #ffffff) !important;background-color:var(--background-color, #ffffff)!important}.explorar-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;padding:0 16px}.explorar-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--text-color, #000000)!important;font-size:28px;font-weight:700;margin:0 0 8px}.explorar-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary, #666666)!important;font-size:16px;margin:0}.filtros-section[_ngcontent-%COMP%]{background:var(--card-background, #ffffff)!important;border:1px solid var(--border-color, #e0e0e0);border-radius:12px;padding:16px;margin-bottom:20px;box-shadow:0 2px 8px #0000000d}.filtros-section[_ngcontent-%COMP%]   .filtros-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px;margin-bottom:12px}@media (max-width: 768px){.filtros-section[_ngcontent-%COMP%]   .filtros-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:8px}}@media (max-width: 480px){.filtros-section[_ngcontent-%COMP%]   .filtros-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.filtros-section[_ngcontent-%COMP%]   .filtro-item[_ngcontent-%COMP%]{--background: var(--card-background, #f9f9f9) !important;background-color:var(--card-background, #f9f9f9)!important;--border-radius: 8px;--padding-start: 12px;--padding-end: 12px;--min-height: 48px;margin-bottom:0}.filtros-section[_ngcontent-%COMP%]   .filtro-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--text-color, #333333)!important;font-weight:500;font-size:13px;margin-bottom:4px}.filtros-section[_ngcontent-%COMP%]   .filtro-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .filtros-section[_ngcontent-%COMP%]   .filtro-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{--color: var(--text-color, #000000) !important;--padding-start: 0;--padding-end: 0;font-size:14px}.filtros-section[_ngcontent-%COMP%]   .filtros-actions[_ngcontent-%COMP%]{display:flex;gap:10px;margin-top:12px}@media (max-width: 768px){.filtros-section[_ngcontent-%COMP%]   .filtros-actions[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}.filtros-section[_ngcontent-%COMP%]   .filtros-actions[_ngcontent-%COMP%]   .buscar-button[_ngcontent-%COMP%]{--background: var(--primary-color, #5900F8) !important;--color: #ffffff !important;flex:1;height:42px;font-weight:600;font-size:14px;text-transform:none;margin:0}.filtros-section[_ngcontent-%COMP%]   .filtros-actions[_ngcontent-%COMP%]   .limpar-button[_ngcontent-%COMP%]{--border-color: var(--text-secondary, #666666) !important;--color: var(--text-secondary, #666666) !important;flex:1;height:42px;font-weight:600;font-size:14px;text-transform:none;margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:200px;text-align:center;padding:40px 20px}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{color:var(--primary-color, #5900F8);width:40px;height:40px;margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary, #666666)!important;font-size:16px}.resultados-section[_ngcontent-%COMP%]   .resultados-header[_ngcontent-%COMP%]{margin-bottom:20px;padding:0 4px}.resultados-section[_ngcontent-%COMP%]   .resultados-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-color, #000000)!important;font-size:20px;font-weight:600;margin:0}.resultados-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;text-align:center;padding:40px 20px}.resultados-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:64px;color:var(--text-secondary, #cccccc)!important;margin-bottom:16px}.resultados-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary, #666666)!important;font-size:16px;margin:8px 0}.resultados-section[_ngcontent-%COMP%]   .reservas-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}@media (max-width: 768px){.resultados-section[_ngcontent-%COMP%]   .reservas-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]{background:var(--card-background, #ffffff)!important;border:1px solid var(--border-color, #e0e0e0);border-radius:16px;padding:20px;cursor:pointer;transition:all .3s ease;box-shadow:0 2px 8px #0000000d;display:flex;flex-direction:column;gap:12px;touch-action:manipulation;-webkit-tap-highlight-color:rgba(89,0,248,.1);user-select:none;-webkit-user-select:none}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #5900f826;transform:translateY(-2px);border-color:var(--primary-color, #5900F8)}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]:active{opacity:.8}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-header[_ngcontent-%COMP%]   .reserva-esporte[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--text-color, #000000)!important;font-weight:600;font-size:16px}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-header[_ngcontent-%COMP%]   .reserva-esporte[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px;color:var(--primary-color, #5900F8)!important}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-header[_ngcontent-%COMP%]   .reserva-status[_ngcontent-%COMP%]{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;text-transform:capitalize}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-header[_ngcontent-%COMP%]   .reserva-status.status-confirmada[_ngcontent-%COMP%]{background:#d4edda;color:#155724!important}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-header[_ngcontent-%COMP%]   .reserva-status.status-pendente[_ngcontent-%COMP%]{background:#fff3cd;color:#856404!important}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-header[_ngcontent-%COMP%]   .reserva-status.status-cancelada[_ngcontent-%COMP%]{background:#f8d7da;color:#721c24!important}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;flex:1}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-body[_ngcontent-%COMP%]   .reserva-info-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:var(--text-secondary, #666666)!important;font-size:14px}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-body[_ngcontent-%COMP%]   .reserva-info-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:16px;color:var(--primary-color, #5900F8)!important;flex-shrink:0}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-body[_ngcontent-%COMP%]   .reserva-info-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-top:12px;border-top:1px solid var(--border-color, #f0f0f0)}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-footer[_ngcontent-%COMP%]   .reserva-valor[_ngcontent-%COMP%]{display:flex;align-items:baseline;gap:6px}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-footer[_ngcontent-%COMP%]   .reserva-valor[_ngcontent-%COMP%]   .valor-label[_ngcontent-%COMP%]{color:var(--text-secondary, #666666)!important;font-size:12px}.resultados-section[_ngcontent-%COMP%]   .reserva-card[_ngcontent-%COMP%]   .reserva-footer[_ngcontent-%COMP%]   .reserva-valor[_ngcontent-%COMP%]   .valor-amount[_ngcontent-%COMP%]{color:var(--primary-color, #5900F8)!important;font-size:18px;font-weight:700}"]});let a=c;return a})();export{be as ExplorarPage};
